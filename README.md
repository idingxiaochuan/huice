# 波段交易回测系统

这是一个基于PyQt5的波段交易回测系统，可以加载历史行情数据，进行波段交易策略回测，并可视化展示交易过程和结果。

## 功能特点

- 从PostgreSQL数据库加载历史分钟级行情数据
- 动态展示K线图和交易标记
- 实时计算账户状态和收益情况
- 基于网格策略的波段交易回测
- 支持调整回测速度、暂停和重置

## 系统要求

- Python 3.8+
- PostgreSQL数据库
- 已安装依赖包（见下文）

## 安装依赖

```bash
pip install -r backtest_gui/requirements.txt
```

## 运行程序

```bash
python run_backtest.py
```

## 使用说明

1. 程序启动后，首先连接到PostgreSQL数据库
2. 在控制面板选择股票代码和回测日期范围
3. 点击"开始回测"按钮，系统开始加载数据并执行回测
4. 回测过程中，K线图会动态显示，交易点位会被标记出来
5. 交易面板会显示每笔交易记录和账户状态
6. 使用"速度"滑块调整回测速度
7. 可以使用"暂停"和"重置"按钮控制回测过程

## 项目结构

```
backtest_gui/
  ├── gui/              # 用户界面模块
  ├── data/             # 数据加载模块
  ├── strategy/         # 交易策略模块
  ├── execution/        # 交易执行模块
  ├── visualization/    # 数据可视化模块
  ├── models/           # 数据模型模块
  ├── utils/            # 工具函数模块
  └── requirements.txt  # 依赖包列表
```

## 配置文件

程序首次运行时会创建config.yaml配置文件，您可以根据需要修改配置：

- 数据库连接信息
- 回测参数设置
- UI界面配置

## 常见问题

1. **数据库连接错误**：请检查config.yaml中的数据库连接参数是否正确
2. **无法显示图表**：请确保已安装matplotlib和PyQt5
3. **中文显示问题**：部分字体可能不支持中文字符，请安装中文字体包

## 开发计划

- [ ] 添加更多技术指标
- [ ] 支持更多策略类型
- [ ] 添加绩效报告导出功能
- [ ] 优化数据加载性能
- [ ] 添加策略参数优化功能 